run = "npm run dev"
modules = ["web", "bash", "nodejs-20", "java-graalvm22.3"]
[nix]
channel = "stable-25_05"
packages = ["gradle_7", "timetrap"]

[deployment]
run = ["sh", "-c", "npm run dev"]

[workflows]
runButton = "Run"

[[workflows.workflow]]
name = "Run"
author = 46497552
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"Capacitor project ready for Android build\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"To build: npm run build\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"To open Android Studio: npm run open:android\""

[[workflows.workflow]]
name = "Build Android APK"
author = 46805126
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üèóÔ∏è Building Android APK...\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "cd android"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "chmod +x *.sh"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "./test-firebase.sh"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "./validate-manifests.sh"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "./fix-build-issues.sh"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "./gradlew clean"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "npx cap sync android"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "./gradlew assembleDebug --stacktrace"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"‚úÖ APK built successfully!\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "ls -la app/build/outputs/apk/debug/"

[[workflows.workflow]]
name = "Verify Crashlytics Setup"
author = 46840319
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "cd android"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "chmod +x verify-crashlytics.sh"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "./verify-crashlytics.sh"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üß™ Ready to test Crashlytics!\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"Build the app and test the crash functionality\""
